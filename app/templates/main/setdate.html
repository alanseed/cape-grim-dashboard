{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block content %}

<head>
  <script type="text/javascript" src="//d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript" src="//cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.css" />
</head>
<script>

</script>
<body>
  <div class="container">
    <div class='row'>
      <div class="col-sm6">
        <h1 class="pt-5 pb-2">{{ title }}</h1>
      </div>
    </div>
    <div class="row">
      <div class="col-sm6">
        <div id="cal-heatmap"></div> 

        <script type="text/javascript"> 
          fetch('http://127.0.0.1:5000/main/chart_date?start=2021-06-01&end=2021-08-01', {
            method: "GET",
            headers: {"Content-type": "application/json;charset=UTF-8"}
          })
          .then(response => response.json()) 
          .then(json => { 
            cal = new CalHeatMap();
            cal.init({
              domain: "month",
              subDomain: "day",
              start: new Date(2021, 5),
              data: json});
          })
        </script>
      </div>
    </div>

    <div class="row">
      <div class="col-sm6">
        {{ wtf.quick_form(form) }}
        <p class="pt-5"><strong>{{ message }}</strong></p>
      </div>
    </div>
    <div class="row">
      <a class="btn btn-primary" href="{{ url_for('main.met') }}" role="button">Home</a>
    </div>
  </div>
</body>


{% endblock %}